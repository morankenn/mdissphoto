<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pretty="http://ocpsoft.com/prettyfaces"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"> 
   
    <ui:composition template="/faces/app/user-space.xhtml">
     
       <ui:define name="head">
     		<link href='http://fonts.googleapis.com/css?family=Lobster' rel='stylesheet' type='text/css'/>
     		
     		<!-- for the album thumbnail slider -->
     		<script type="text/javascript" src="http://ryrych.github.com/rcarousel/widget/lib/jquery-1.7.1.js"></script>
			<script type="text/javascript" src="http://ryrych.github.com/rcarousel/widget/lib/jquery.ui.core.js"></script>
			<script type="text/javascript" src="http://ryrych.github.com/rcarousel/widget/lib/jquery.ui.widget.js"></script>
			<script type="text/javascript" src="http://ryrych.github.com/rcarousel/widget/lib/jquery.ui.rcarousel.js"></script>
			<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
			<h:outputScript library="js" name="tag-it.js" />
			<h:outputStylesheet library="css" name="jquery.tagit.css"  />
			
			<script type="text/javascript">
			    $(document).ready(function() {
			    	$('#myTags').tagit();
			    });

			    
				function getAllTags() {
			    	var allTags = $('#myTags').tagit("assignedTags");
			    	$('#misTags').attr('value', allTags);    					    	
		    	};			    
			</script>
     		
     		<style type="text/css">
				#container {
					width: 440px;
					position: relative;
				}
				
				#carousel {
					margin: 0 auto;
				}
	
				#carousel img {
					border: 0;
				}
				
				.ui-carousel {
					height: 80px;
					margin: 0;
					overflow: auto;
					padding: 0;
					position: relative; /*for ie7 to work e.g in html carousels*/
					width: 300px
				}
				
				.ui-carousel > .wrapper {
				    margin: 0;
				    padding: 0;
				    width: 9999px;
				}
				
				.ui-carousel > .wrapper > * {
					border: 0;
					display: block;
					float: left;
					height: 80px;
					overflow: hidden;
					width: 80px;	
				}
				
			</style>
     		
     		<script type="text/javascript">
     		
     		//if we have less than 3 thumbnails then the quantity of thumnails to display
     		//is that number and not three
     		
     		var total = #{fn:length(photoDetailsBean.thumbnailIds)};
     		if (total > 3)
     			total = 3;
     		
			jQuery(function($) {
				$( "#carousel ").rcarousel({
					margin: 5,
					visible: total,
					width: 75,	
					height: 75,
					step: 1,
				});
				
				$( "#ui-carousel-next" )
					.add( "#ui-carousel-prev" )
					.hover(
						function() {
							$( this ).css( "opacity", 0.7 );
						},
						function() {
							$( this ).css( "opacity", 1.0 );
						}
					);					
			});
		</script>
     				 
      	</ui:define>
      	
      	
		<ui:define name="title">
			Mdissphoto / #{photoDetailsBean.photo.title} by #{photoDetailsBean.userNick}
		</ui:define>
		
		<ui:define name="header">	
		</ui:define>
		
		<ui:define name="body">
		
        <h:form id="formulario">    		
        	<input type="hidden" id="misTags" name="misTags" value="#{photoDetailsBean.misTags}"/>	
	    	<!-- Photo title -->
	    	<div class="row-fluid">
				<div class="span12">				
		      		<h1 class="photo-title"><h:outputLabel value="Photo Title: " /></h1>
		      		<p:inputText id="photoTitle" value="#{photoDetailsBean.photo.title}" label="photoTitle"/>	
	       		</div>
            </div>

			<!-- UserNick -->
	    	<div class="row-fluid">
				<div class="span12">
		      		<h1 class="photo-title"><h:outputLabel value="UserNick: " /></h1>
		      		#{photoDetailsBean.userNick}	
	       		</div>
            </div>

			<!-- Album title -->
	    	<div class="row-fluid">
				<div class="span12">				
		      		<h1 class="photo-title"><h:outputLabel value="Album Title: " /></h1>		 
		      		<p:selectOneMenu id="selected" value="#{photoDetailsBean.selectedAlbum}">  			                 
			               <f:selectItems value="#{photoDetailsBean.albumTitles}"/>  			                 
		            </p:selectOneMenu> 
	       		</div>
            </div>
	    	
            <!-- TODO: Show votos Totales -->
            <div class="row-fluid">
				<div class="span12">
		      		<h1 class="photo-title"><h:outputLabel value="Votes: " /></h1>
		      		#{photoDetailsBean.totalVotesPoints}  	
	       		</div>
            </div>
	    	 
	    	<!-- Photo and menu -->
	    	<div class="row-fluid">				
				<div class="span12">   				
					<!-- tags -->					
					 <h1 class="photo-title"><h:outputLabel value="Tags: " /></h1>
					 <ul id="myTags" >
					 	<!-- Obtener todos los tags de la photo -->
					 	<ui:repeat value="#{photoDetailsBean.photo.tags}" var="tag">
					 	<li id="listaTags">
					 		#{tag}					 		 			 		
					 	</li>
					 	</ui:repeat>
					 </ul>																																							   										
				</div>				
			</div>
			<h:commandButton styleClass="btn btn-primary" value="Modify" type="submit" action="#{photoDetailsBean.saveSettings}" onclick="getAllTags();"/>
			<!-- <input type="button" value="Modificar" onclick="getAllTags();" />-->			
			<!-- CANCELAR -->
			<!-- Cargar nuevamente el -->
			
		</h:form>			
		</ui:define>
               
    </ui:composition>
</html>