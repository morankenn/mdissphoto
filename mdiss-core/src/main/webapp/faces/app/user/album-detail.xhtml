<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pretty="http://ocpsoft.com/prettyfaces"
      xmlns:ui="http://java.sun.com/jsf/facelets">  
    
    <ui:composition template="/faces/app/user-space.xhtml">
    
	    <ui:define name="head">
	    
			<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
			
	     	<h:outputScript library="js" name="jquery.masonry.min.js" />
	     	<h:outputScript library="js" name="albumContent.js" />	 
	     	<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-modal.js"></script> 
	     	    		
		</ui:define>
      
		<!--  <ui:define name="title">MDISSPHOTO</ui:define>-->
		
		<ui:define name="body">	
						   
	  		<div class="row-fluid">
		  		<div class="span2">
			  		<pretty:link mappingId="album-list" >
			  			<f:param value="#{albumDetailsBean.userNick}" />
			  			<button class="btn btn-inverse alignLeft" type="submit">
						  	<i class="icon-arrow-left icon-white"/>						  																		
							Back to Albums
						</button>
					</pretty:link>	
				</div>		
				<div class="span8">
			  		<div class="ribbon-container">
			  			<div class="ribbon">
			  				<div class="ribbon-stitches-top"></div>
			  				<strong class="ribbon-content"> 
			  					<h1><h:outputText id="albTitle" value="#{albumDetailsBean.albumTitle}" /></h1>	
			  				</strong>
			  				<div class="ribbon-stitches-bottom"></div>
			  			</div> 
			  		</div>
		  		</div>
		  		<h:panelGroup layout="block" rendered="#{albumBean.showMenu}">
			  		<div class="span2">
			  			<a class="btn btn-primary alignRight" data-toggle="modal" href="#modifyModal" >
			  				<i class="icon-pencil icon-white"/>
			  				Edit album name
			  			</a>						
			  		</div>
			  	</h:panelGroup>
	  		</div>
			<div class="row-fluid">
				<div class="span12">			  	
					<div class="box centered">	
		  				<ui:repeat value="#{albumDetailsBean.photoURLs}" var="photoURL" varStatus="status">	
		   				<div class="thumb">	
		   					<pretty:link mappingId="photo-detail" >
		    					<f:param value="#{albumDetailsBean.userNick}" />
								<f:param value="#{albumDetailsBean.photoIDs[status.index]}" />	
		   						<h:graphicImage  value="#{photoURL}" />																							 																								
								<div class="textBox">
									<div class="text">#{albumDetailsBean.photoTitles[status.index]}</div>	
								</div> 
							</pretty:link>
						</div>								
		    		</ui:repeat>
		    	</div>	    		
			  </div> 		
			</div>	
			
			<h:panelGroup layout="block" rendered="#{albumDetailsBean.showMenu}">
				<div class="modal hide fade" id="modifyModal">
					<div class="modal-header">
						<button class="close" data-dismiss="modal">Ã—</button>
						<h3>Modify album name</h3>
					</div>
					<h:form>	    					         
						<div class="modal-body">
							<h:inputText id="newTitle" class="alighnLeft" value="#{albumDetailsBean.albumTitle}"></h:inputText>
							<h:outputText id="feedback" class="alert alert-success alignRight" value="#{albumDetailsBean.message}" />
						</div>
						<div class="modal-footer">
							<a href="#" class="btn" data-dismiss="modal"> Close </a>
							<h:commandButton styleClass="btn btn-primary" value="Change it!">
								<f:ajax execute="newTitle" render=":albTitle feedback" listener="#{albumDetailsBean.modifyTitle}" />
							</h:commandButton>	
						</div>		                                                    	                    
	                 </h:form>
				</div>
			</h:panelGroup>
							
		</ui:define>
				
    </ui:composition>
</html>
